<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test - Syst√®me de Notifications</title>
  <link rel="stylesheet" href="src/styles/main.css">
  <style>
    .demo-container {
      max-width: 1200px;
      margin: 50px auto;
      padding: 30px;
      background: var(--card-bg);
      border-radius: 20px;
      border: 2px solid var(--border-color);
    }

    .demo-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .demo-header h1 {
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .demo-header p {
      color: var(--text-secondary);
    }

    .demo-section {
      margin-bottom: 40px;
    }

    .demo-section h2 {
      color: var(--text-primary);
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--border-color);
    }

    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .demo-btn {
      padding: 15px 20px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      color: white;
    }

    .demo-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .demo-btn.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .demo-btn.error {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    }

    .demo-btn.warning {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }

    .demo-btn.info {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }

    .code-block {
      background: var(--dark-bg);
      padding: 15px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      margin-top: 10px;
      overflow-x: auto;
    }

    .code-block code {
      color: var(--primary-color);
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <div class="demo-header">
      <h1>üîî Syst√®me de Notifications - D√©monstration</h1>
      <p>Testez les diff√©rents types de notifications et modales</p>
    </div>

    <!-- Section: Notifications -->
    <div class="demo-section">
      <h2>üì® Notifications Toast</h2>
      
      <div class="demo-grid">
        <button class="demo-btn success" onclick="testSuccess()">
          ‚úì Success Notification
        </button>
        <button class="demo-btn error" onclick="testError()">
          ‚úï Error Notification
        </button>
        <button class="demo-btn warning" onclick="testWarning()">
          ‚ö† Warning Notification
        </button>
        <button class="demo-btn info" onclick="testInfo()">
          ‚Ñπ Info Notification
        </button>
      </div>

      <div class="code-block">
        <code>Notification.success('Operation completed successfully!');</code>
      </div>
    </div>

    <!-- Section: Notifications avec dur√©e personnalis√©e -->
    <div class="demo-section">
      <h2>‚è±Ô∏è Dur√©e Personnalis√©e</h2>
      
      <div class="demo-grid">
        <button class="demo-btn info" onclick="testShort()">
          ‚ö° Courte (2s)
        </button>
        <button class="demo-btn info" onclick="testLong()">
          üïê Longue (10s)
        </button>
        <button class="demo-btn info" onclick="testPermanent()">
          ‚àû Permanente
        </button>
      </div>

      <div class="code-block">
        <code>Notification.notify('Message', 'info', 'Titre', 2000);</code>
      </div>
    </div>

    <!-- Section: Notifications multiples -->
    <div class="demo-section">
      <h2>üìö Notifications Multiples</h2>
      
      <div class="demo-grid">
        <button class="demo-btn info" onclick="testMultiple()">
          üéØ Empiler 5 notifications
        </button>
        <button class="demo-btn success" onclick="testSequence()">
          üîÑ S√©quence progressive
        </button>
      </div>

      <div class="code-block">
        <code>// Les notifications s'empilent automatiquement</code>
      </div>
    </div>

    <!-- Section: Modales de confirmation -->
    <div class="demo-section">
      <h2>‚ö†Ô∏è Modales de Confirmation</h2>
      
      <div class="demo-grid">
        <button class="demo-btn info" onclick="testConfirm()">
          ? Confirmation Standard
        </button>
        <button class="demo-btn warning" onclick="testWarningModal()">
          ‚ö† Avertissement
        </button>
        <button class="demo-btn error" onclick="testDangerModal()">
          ‚õî Action Dangereuse
        </button>
        <button class="demo-btn success" onclick="testCustomModal()">
          ‚ú® Modale Personnalis√©e
        </button>
      </div>

      <div class="code-block">
        <code>const confirmed = await Notification.confirm('Message', options);</code>
      </div>
    </div>

    <!-- Section: Cas d'usage r√©els -->
    <div class="demo-section">
      <h2>‚úàÔ∏è Cas d'Usage R√©els</h2>
      
      <div class="demo-grid">
        <button class="demo-btn success" onclick="testFlightStart()">
          üõ´ D√©marrer un vol
        </button>
        <button class="demo-btn info" onclick="testFlightEnd()">
          üõ¨ Terminer un vol
        </button>
        <button class="demo-btn error" onclick="testFlightCancel()">
          ‚ùå Annuler une r√©servation
        </button>
        <button class="demo-btn warning" onclick="testLogout()">
          üö™ D√©connexion
        </button>
      </div>
    </div>

    <!-- Section: Tests de connexion -->
    <div class="demo-section">
      <h2>üîå Simulation d'erreurs</h2>
      
      <div class="demo-grid">
        <button class="demo-btn error" onclick="testConnectionError()">
          üì° Erreur de connexion
        </button>
        <button class="demo-btn error" onclick="testSimulatorError()">
          üéÆ Erreur SimConnect
        </button>
        <button class="demo-btn warning" onclick="testValidationError()">
          üìù Erreur de validation
        </button>
      </div>
    </div>
  </div>

  <script src="src/services/notification.js"></script>
  <script>
    // Tests de notifications simples
    function testSuccess() {
      Notification.success('Votre vol a √©t√© enregistr√© avec succ√®s!', 'Succ√®s');
    }

    function testError() {
      Notification.error('Impossible de se connecter au serveur', 'Erreur');
    }

    function testWarning() {
      Notification.warning('Carburant faible d√©tect√©', 'Attention');
    }

    function testInfo() {
      Notification.info('Phase de vol chang√©e en croisi√®re', 'Information');
    }

    // Tests de dur√©e
    function testShort() {
      Notification.notify('Notification courte (2 secondes)', 'info', 'Test Dur√©e', 2000);
    }

    function testLong() {
      Notification.notify('Notification longue (10 secondes)', 'info', 'Test Dur√©e', 10000);
    }

    function testPermanent() {
      Notification.notify(
        'Cette notification reste affich√©e jusqu\'√† ce que vous la fermiez',
        'info',
        'Permanente',
        0
      );
    }

    // Tests multiples
    function testMultiple() {
      Notification.success('Premi√®re notification');
      setTimeout(() => Notification.info('Deuxi√®me notification'), 200);
      setTimeout(() => Notification.warning('Troisi√®me notification'), 400);
      setTimeout(() => Notification.error('Quatri√®me notification'), 600);
      setTimeout(() => Notification.success('Cinqui√®me notification'), 800);
    }

    function testSequence() {
      Notification.info('Connexion en cours...', '√âtape 1/3');
      setTimeout(() => {
        Notification.info('Authentification...', '√âtape 2/3');
      }, 1500);
      setTimeout(() => {
        Notification.success('Connect√© avec succ√®s!', '√âtape 3/3');
      }, 3000);
    }

    // Tests de modales
    async function testConfirm() {
      const confirmed = await Notification.confirm(
        'Voulez-vous continuer cette action?',
        {
          title: 'Confirmation',
          confirmText: 'Oui',
          cancelText: 'Non'
        }
      );
      
      if (confirmed) {
        Notification.success('Action confirm√©e!');
      } else {
        Notification.info('Action annul√©e');
      }
    }

    async function testWarningModal() {
      const confirmed = await Notification.confirm(
        'Cette action peut avoir des cons√©quences. √ätes-vous s√ªr?',
        {
          title: 'Avertissement',
          confirmText: 'Continuer',
          cancelText: 'Annuler',
          type: 'warning'
        }
      );
      
      if (confirmed) {
        Notification.warning('Action ex√©cut√©e avec avertissement');
      }
    }

    async function testDangerModal() {
      const confirmed = await Notification.confirm(
        'Cette action est irr√©versible et supprimera toutes les donn√©es. Continuer?',
        {
          title: 'Action Dangereuse',
          confirmText: 'Oui, supprimer',
          cancelText: 'Non, garder',
          type: 'error',
          icon: '‚õî'
        }
      );
      
      if (confirmed) {
        Notification.error('Donn√©es supprim√©es', 'Action Destructive');
      } else {
        Notification.success('Donn√©es conserv√©es', 'Annul√©');
      }
    }

    async function testCustomModal() {
      const confirmed = await Notification.confirm(
        'Cette modale utilise des textes et ic√¥nes personnalis√©s.',
        {
          title: '‚ú® Personnalisation',
          confirmText: 'üëç Super!',
          cancelText: 'üëé Non merci',
          type: 'confirm',
          icon: 'üé®'
        }
      );
      
      Notification.info(confirmed ? 'Vous aimez!' : 'Pas votre style');
    }

    // Cas d'usage r√©els
    async function testFlightStart() {
      const confirmed = await Notification.confirm(
        'Pr√™t √† d√©marrer votre vol? Assurez-vous que MSFS 2020 est en cours d\'ex√©cution.',
        {
          title: 'D√©marrer le Vol',
          confirmText: 'D√©marrer',
          cancelText: 'Pas encore',
          type: 'confirm'
        }
      );
      
      if (confirmed) {
        Notification.info('Connexion au simulateur...', 'Initialisation');
        setTimeout(() => {
          Notification.success('Vol d√©marr√© avec succ√®s! Bon vol!', 'Vol Actif');
        }, 2000);
      }
    }

    async function testFlightEnd() {
      const confirmed = await Notification.confirm(
        'Terminer le vol et envoyer le rapport?',
        {
          title: 'Terminer le Vol',
          confirmText: 'Terminer',
          cancelText: 'Continuer',
          type: 'confirm'
        }
      );
      
      if (confirmed) {
        Notification.info('Envoi du rapport...', 'Traitement');
        setTimeout(() => {
          Notification.success(
            'Rapport de vol soumis avec succ√®s! Excellent travail, Capitaine!',
            'Vol Termin√©'
          );
        }, 2000);
      }
    }

    async function testFlightCancel() {
      const confirmed = await Notification.confirm(
        '√ätes-vous s√ªr de vouloir annuler ce vol? Cette action supprimera la r√©servation.',
        {
          title: 'Annuler le Vol',
          confirmText: 'Oui, annuler',
          cancelText: 'Garder le vol',
          type: 'error',
          icon: '‚ö†'
        }
      );
      
      if (confirmed) {
        Notification.warning('Vol annul√©', 'R√©servation Supprim√©e');
      } else {
        Notification.success('Vol conserv√©', 'Annulation Annul√©e');
      }
    }

    async function testLogout() {
      const confirmed = await Notification.confirm(
        '√ätes-vous s√ªr de vouloir vous d√©connecter?',
        {
          title: 'D√©connexion',
          confirmText: 'Se d√©connecter',
          cancelText: 'Rester connect√©',
          type: 'warning'
        }
      );
      
      if (confirmed) {
        Notification.success('D√©connexion r√©ussie', '√Ä bient√¥t!');
      }
    }

    // Simulation d'erreurs
    function testConnectionError() {
      Notification.error(
        'Impossible de se connecter au serveur API.\n\nV√©rifiez votre connexion internet et r√©essayez.',
        'Erreur de Connexion'
      );
    }

    function testSimulatorError() {
      Notification.error(
        '√âchec de la connexion au simulateur.\n\nAssurez-vous que MSFS 2020 est en cours d\'ex√©cution et que vous √™tes en vol.',
        'Erreur SimConnect'
      );
    }

    function testValidationError() {
      Notification.warning(
        'Veuillez remplir tous les champs requis avant de continuer.',
        'Validation'
      );
    }

    // Message de bienvenue
    setTimeout(() => {
      Notification.info(
        'Cliquez sur les boutons pour tester le syst√®me de notifications!',
        'Bienvenue',
        7000
      );
    }, 500);
  </script>
</body>
</html>
